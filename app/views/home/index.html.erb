<div class="flex flex-col items-center flex-1 px-4 py-8">
  <div class="w-full max-w-md overflow-hidden rounded-2xl border border-gray-200 bg-white shadow-xl">
    <div class="bg-gradient-to-br from-emerald-500 to-sky-500 px-6 py-6 text-left">
      <p class="text-xs font-semibold uppercase tracking-widest text-white/70">Today&apos;s Summary</p>
      <h1 class="mt-2 text-2xl font-bold text-white">あなたの喫煙データ</h1>
      <p class="mt-1 text-xs text-white/80">金額・箱数・銘柄を一目でチェックできます。</p>
    </div>

    <div class="space-y-6 px-6 py-6">
      <div class="space-y-5">
        <div class="flex items-center gap-4">
          <div class="flex h-12 w-12 items-center justify-center rounded-full bg-emerald-100 text-green-700 shadow-inner">
            <%= image_tag "icons/money.svg", alt: "金額アイコン", class: "h-6 w-6" %>
          </div>
          <div class="flex-1">
            <p class="text-xs font-semibold uppercase tracking-wide text-green-700">たばこに使った金額</p>
            <div class="mt-1 text-3xl font-bold text-slate-900" id="total_amount">
              <%= render "home/total_amount" %>
            </div>
          </div>
        </div>

        <div class="flex items-center gap-4">
          <div class="flex h-12 w-12 items-center justify-center rounded-full bg-teal-100 text-teal-700 shadow-inner">
            <%= image_tag "icons/cigarettes-package.svg", alt: "箱数アイコン", class: "h-6 w-6" %>
          </div>
          <div class="flex-1">
            <p class="text-xs font-semibold uppercase tracking-wide text-teal-700">購入した箱数</p>
            <div class="mt-1 text-3xl font-bold text-slate-900" id="total_packs">
              <%= render "home/total_packs" %>
            </div>
          </div>
        </div>

        <div class="flex items-center gap-4">
          <div class="flex h-12 w-12 items-center justify-center rounded-full bg-lime-100 text-lime-700 shadow-inner">
            <%= image_tag "icons/cigarette-smoking.svg", alt: "銘柄アイコン", class: "h-6 w-6" %>
          </div>
          <div class="flex-1">
            <p class="text-xs font-semibold uppercase tracking-wide text-lime-700">現在の銘柄</p>
            <div class="mt-1 flex flex-wrap items-center gap-2 text-2xl font-bold text-slate-900">
              <span class="truncate"><%= current_user.current_cigarette&.name ||
                                         current_user.current_custom_cigarette&.name ||
                                         "未選択" %></span>
              <%= link_to "変更", select_cigarettes_path,
                    class: "text-xs font-semibold text-emerald-600 underline" %>
            </div>
          </div>
        </div>
      </div>

      <div class="rounded-xl border border-dashed border-emerald-200 bg-emerald-50/70 p-5 text-left shadow-sm">
        <p class="text-sm font-semibold text-slate-800">箱数をカウントする</p>

        <div class="mt-4">
          <% if current_user.current_cigarette.present? %>
            <%= form_with model: Smoke.new, url: smokes_path, method: :post, class: "space-y-4" do |f| %>
              <div class="flex items-center justify-between gap-3">
                <%= f.label :packs, "箱数", class: "text-sm font-semibold text-slate-700" %>
                <%= f.select :packs, (1..12).to_a,
                      {},
                      class: "w-28 rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" %>
              </div>
              <%= f.submit "登録",
                    class: "w-full rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-emerald-400 cursor-pointer" %>
            <% end %>
          <% elsif current_user.current_custom_cigarette.present? %>
            <%= form_with model: CustomCigaretteLog.new, url: custom_cigarette_logs_path, method: :post, class: "space-y-4" do |f| %>
              <div class="flex items-center justify-between gap-3">
                <%= f.label :packs, "箱数", class: "text-sm font-semibold text-slate-700" %>
                <%= f.select :packs, (1..12).to_a,
                      {},
                      class: "w-28 rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" %>
              </div>
              <%= f.submit "登録",
                    class: "w-full rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-white shadow transition hover:bg-emerald-400 cursor-pointer" %>
            <% end %>
          <% else %>
            <p class="rounded-lg bg-white px-4 py-3 text-center text-sm text-emerald-700 shadow">現在の銘柄が未選択です</p>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6 w-full max-w-md space-y-3">
    <%= link_to "買えたものリストを見る", items_path,
          class: "block w-full rounded-lg bg-emerald-600 px-4 py-3 text-center text-sm font-semibold text-white shadow transition hover:bg-emerald-500" %>
    <%= link_to "Xで共有", "#",
          class: "block w-full rounded-lg bg-slate-900 px-4 py-3 text-center text-sm font-semibold text-white" %>
  </div>
</div>
