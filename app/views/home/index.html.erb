<div class="container mx-auto max-w-md py-8 space-y-6">

  <!-- たばこに使った合計金額 -->
  <div class="border rounded-xl p-4 flex items-center justify-between shadow">
    <div class="flex items-center space-x-2">
      <span class="text-2xl">💴</span>
      <p class="font-bold">たばこに使った金額</p>
    </div>
    <!-- turbo-frameでパーシャル化してレンダリング -->
    <div id="total_amount">
      <!-- パーシャルの呼び出し -->
      <%= render "home/total_amount" %>
    </div>
  </div>

  <!-- たばこの合計箱数 -->
  <div class="border rounded-xl p-4 flex items-center justify-between shadow">
    <div class="flex items-center space-x-2">
      <span class="text-2xl">🚬</span>
      <p class="font-bold">購入した箱数</p>
    </div>
    <!-- turbo-frameでパーシャル化してレンダリング -->
    <div id="total_packs">
      <!-- パーシャルの呼び出し -->
      <%= render "home/total_packs" %>
    </div>
  </div>

  <!-- 現在の銘柄 -->
  <div class="border rounded-xl p-4 shadow space-y-3">
    <p class="font-bold mb-2">現在の銘柄</p>
    <p class="text-lg font-bold">
      <!-- 現在の銘柄表示（nilの場合は未選択と表示 -->
      <%= current_user.current_cigarette&.name || "未選択" %>
    </p>
    
    <!-- 送信フォームを作る -->
    <!-- updateアクションにしたいからmethod: :patchにしている -->
    <%= form_with url: current_cigarette_path, method: :patch, local: true do |f| %>
      <div class="flex space-x-2">
        <%= select_tag :current_cigarette_id,
              options_from_collection_for_select(
                @cigarettes, :id, :name, current_user.current_cigarette_id
              ),
              class: "border rounded p-2" %>
        <%= f.submit "変更", class: "bg-blue-500 text-white font-bold px-4 py-2 rounded cursor-pointer" %>
      </div>
    <% end %>
  </div>

  <!-- 箱数をカウントする -->
  <div class="border rounded-xl p-4 shadow space-y-3">
    <p class="font-bold">箱数をカウントする</p>
    <%= form_with model: Smoke.new, url: smokes_path, method: :post do |f| %>
      <div class="flex space-x-2">
        <%= f.select :packs, (1..12).to_a, {}, class: "border rounded p-2" %>
        <%= f.submit "登録", class: "bg-green-500 text-white font-bold px-4 py-2 rounded cursor-pointer" %>
      </div>
    <% end %>
  </div>

  <!-- 買えたものリスト -->
  <div>
    <%= link_to "買えたもののリストを見る", items_path, 
          class: "w-full block text-center bg-green-600 text-white font-bold px-4 py-3 rounded shadow hover:bg-green-500" %>
  </div>

  <!-- Xで共有 -->
  <div>
    <%= link_to "Xで共有", "#", 
          class: "w-full block text-center bg-black text-white font-bold px-4 py-3 rounded" %>
  </div>

  <div>
    <%= link_to "ログアウト", destroy_user_session_path, 
          data: { turbo_method: :delete },
          class: "w-full block text-center bg-red-500 text-white font-bold px-4 py-3 rounded hover:bg-red-400" %>
  </div>
</div>
